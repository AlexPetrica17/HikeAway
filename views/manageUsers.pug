extends base

mixin navItem(link, text, icon, active)
  li(class=`${active ? 'side-nav--active' : ''}`)
    a(href=`${link}`)
      svg
        use(xlink:href=`/img/icons.svg#icon-${icon}`)
      | #{text}

block content
  main.main
    .user-view
      nav.user-view__menu
        ul.side-nav
          +navItem('/me', 'Setări', 'settings')
          +navItem('/my-tours', 'Rezervările mele', 'briefcase')
          +navItem('/my-reviews', 'Recenziile mele', 'star')
          +navItem('/billing', 'Facturare', 'credit-card')
        - if (user.role === 'admin')
            .admin-nav
            h5.admin-nav__heading Admin
            ul.side-nav
                +navItem('/manage-tours', 'Gestionare tururi', 'map')
                +navItem('/manage-reviews', 'Gestionare recenzii', 'star')
                +navItem('/manage-bookings', 'Gestionare rezervări', 'briefcase')
                +navItem('/manage-users', 'Gestionare utilizatori', 'users', true)

      .user-view__content
        .user-view__form-container
          .users-table-container
            h2.heading-secondary.ma-bt-md Gestionare utilizatori

            if users.length
              table.table(style='width: 100%; text-align: center; border-collapse: collapse;')
                thead
                  tr(style='background-color: #fff3e0; color: #f97316; font-weight: bold;')
                    th(style='padding: 1rem; border-bottom: 1px solid #f97316;') Nume complet
                    th(style='padding: 1rem; border-bottom: 1px solid #f97316;') Email
                    th(style='padding: 1rem; border-bottom: 1px solid #f97316;') Rol
                    th(style='padding: 1rem; border-bottom: 1px solid #f97316;') Acțiune
                tbody
                  each user in users
                    tr(style='border-bottom: 1px solid #eee;')
                      td(style='padding: 1rem;')= `${user.name}`
                      td(style='padding: 1rem;')= user.email
                      td(style='padding: 1rem;')
                        select.role-select(data-user-id=user._id)
                          option(value='user' selected=(user.role === 'user')) user
                          option(value='guide' selected=(user.role === 'guide')) guide
                          option(value='lead-guide' selected=(user.role === 'lead-guide')) lead-guide
                          option(value='admin' selected=(user.role === 'admin')) admin
                      td(style='padding: 1rem; display: flex; justify-content: center;')
                        button.btn.btn--green.btn--small.save-role-btn(type='button', data-user-id=user._id) Salvează
            else
              p(style='padding:2rem;') Nu există utilizatori înregistrați.
